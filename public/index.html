<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<title></title>
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.4.2/css/swiper.min.css" />
		<link rel="stylesheet" href="main.css" type="text/css" media="screen" title="no title" charset="utf-8">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.4.2/js/swiper.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.4.2/vue.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/vuex/2.3.1/vuex.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/vue-router/2.7.0/vue-router.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/vue-resource@1.3.4"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/async/2.5.0/async.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
		<script src="js/web3.min.js"></script>
		<script src="js/blockies.min.js"></script>
	</head>
	<body>

		<div :class='appClass' id="app">
			<topbar></topbar>
			<router-view></router-view>
		</div>

		<script type="text/x-template" id="intro">
			<div class="intro screen">
				<div class="nomargin inner">
					<div class='nomargin logo img' style="background-image:url(./img/logo.png);"></div>
					<div class="swiper-container">
						<div class="swiper-wrapper">
							<div class="swiper-slide">

								<div class='img' style="background-image:url(./img/welcome-1.png);"></div>
								<h1 class='center'>Welcome</h1>
								<p class="text center">
									This is the æxistence. This æpp enables you to proof the existance of digital files on the æternity blockchain and share it with other poeple.
								</p>
								<div class="pink next button">
									Next
								</div>

							</div>
							<div class="swiper-slide">

								<div class='img' style="background-image:url(./img/welcome-2.png);"></div>

								<h1 class='center'>Proofs</h1>
								<p class="text center">
								Proofs are unchallengeable evidence that a file existed at a specific time in the past. They are immutable and resistent to manipulation.
								</p>
								<div class="pink next button">
									Next
								</div>

							</div>
							<div class="swiper-slide">

								<div class='img' style="background-image:url(./img/welcome-3.png);"></div>

								<h1 class='center'>Welcome</h1>
								<p class="text center">
									In order to create proofs you need to identify with the Identity Manager. Please download it from the App Store and set up your identity.
								</p>
								<div class="pink button">
									<router-link to="/home">
										Open Identity Manager
									</router-link>
								</div>

							</div>
						</div>
						<div class="center notice">
							<router-link to="/home">skip</router-link>
						</div>
						<div class="swiper-pagination"></div>
					</div>
				</div>
			</div>
		</script>

		<script type="text/x-template" id="avatar">
			<div :style='style' class="avatar"></div>
			<!-- <div class="avatar" v-html="blockie"></div> -->
		</script>

		<script type="text/x-template" id="identity">
			<div :class="{ 'identity-wrap' : true, 'show-payment-ui' : showPaymentUi }">

				<div v-if='showPaymentUi' class="payment">
					<p class="center">
						Please confirm the transaction of
						<br>
						<span class="price">
							<span class="amount">{{paymentRequest.amount}}</span>
							<span class="currency-symbol">ETH</span>
						</span>
						<br>
					</p>
					<div @click='pay' class="pink button pay">
						Pay {{paymentRequest.amount}} ETH
					</div>
					<div @click='cancel' class="button">
						cancel
					</div>
				</div>

				<div @click='toggle' :class="{identity:true, collapsed : collapsed, 'show-payment-ui' : showPaymentUi }">
					<div class="left">
						<avatar :image='identity.avatar' :blockie='blockie'></avatar>
						<div class="account-info">
							<div class="name">{{identity.name}}</div>
							<div class="address">{{identity.address}}</div>
						</div>
					</div>
					<div class="right">
						<div class="balance">
							<span class="amount">{{identity.balance}}</span>
							<span class="currency-symbol">AET</span>
						</div>
					</div>
					</div>
				</div>
			</div>
		</script>

		<script type="text/x-template" id="speech">
			<div class="speech-container">
				<div :class="thisclass">
					<p class='text' v-if='body.type === 0'>{{body.text}}</p>

					<div v-if='body.type === 3'>
						<p class='text'>{{body.description}}</p>
						<a :href="body.url" target="_blank" class='text'>{{body.title}}</a>
					</div>

					<div class='image' :style='style' v-if='body.type === 1'>
						<div class='linkwrap' v-if='body.link'>
							<router-link :to='body.link'>
							{{ body.linktext }}
							</router-link>
						</div>
					</div>
				</div>
			</div>
		</script>

		<script type="text/x-template" id="menu-entry">
			<div class="menu-entry">
				<router-link :to="link">
					<svg width="24" height="18" viewBox="0 0 24 18" xmlns="http://www.w3.org/2000/svg">
						<g stroke-width=".7" transform="translate(1)" stroke="#F03C6E" fill="none" fill-rule="evenodd">
							<path d="M8.615 7.653L11.371 6.5c.525-.219 1.32-.219 1.841 0l2.012.841c.295.125.84.125 1.14 0l2.01-.84c.523-.22 1.315-.22 1.837 0l2.752 1.152M8.615 9.702l2.756-1.152c.525-.22 1.32-.22 1.841 0l2.012.84c.295.126.84.126 1.14 0l2.01-.84c.523-.22 1.315-.22 1.837 0l2.752 1.152M8.615 11.547l2.756-1.152c.525-.22 1.32-.22 1.841 0l2.012.84c.295.126.84.126 1.14 0l2.01-.84c.523-.22 1.315-.22 1.837 0l2.752 1.152" stroke-linecap="round"/>
							<circle cx="8.404" cy="9" r="8.404"/>
							<circle cx="8.404" cy="9" r="6.751"/>
						</g>
					</svg>
					{{label}}
				</router-link>
			</div>
		</script>

		<script type="text/x-template" id="topbar">
			<div :class="thisclass">
				<header>
					<div class="action left">
						<button v-show='showBurger' @click='toggleopen'>
							<svg class='burger' width="20" height="14" viewBox="0 0 20 14" xmlns="http://www.w3.org/2000/svg">
								<path fill="#4A4A4A" fill-rule="evenodd" d="M0 0h20v2H0zM0 6h20v2H0zM0 12h20v2H0z"/>
							</svg>
						</button>
						<button v-show='showBack' @click='$router.push("/proofs")'>
							<svg class='back' width="11" height="18" viewBox="0 0 11 18" xmlns="http://www.w3.org/2000/svg">
								<path d="M11 2L9 0 0 9l9 9 2-2-7-7z" fill="#4A4A4A" fill-rule="evenodd"/>
							</svg>
						</button>
					</div>

					<div class="title center">{{title}}</div>

					<div class="action right">
						<router-link v-show='showAdd' to='/chat'>
							<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
								<g fill="#4A4A4A" fill-rule="evenodd"><path d="M0 9h20v2H0z"/><path d="M11 0v20H9V0z"/></g>
							</svg>
						</router-link>
					</div>
				</header>
				<identity/>
				<nav>
					<div class="inner">
						<div class="center">
							<avatar :image='identity.avatar'></avatar>
							<div class="name">
								{{identity.name}}
							</div>
						</div>
						<menu-entry :link='entry.link' :label='entry.label' v-for='entry in entris'></menu-entry>
					</div>
				</nav>
			</div>
		</script>

		<script type="text/x-template" id="camera">
			<div v-if='show' @click='close' class="camera">
				<div class="image"></div>
			</div>
		</script>

		<script type="text/x-template" id="proofs-list-entry">
			<router-link :to='"/proofs/"+proof.fileSha256'>
				<div class="proofs-list-entry">
					<div class="left">
						<div :style='"background-image:url(" +proof.image+ ")"' class="proof-image">
						</div>
					</div>
					<div class="middle">
						<div class="proof-title">{{ proof.title }}</div>
						<div class="proof-created">{{ readableTimestamp(proof.created) }}</div>
					</div>
					<div class="right">
						<div class="proof-confirmations">{{ proof.confirmations}} confirmed</div>
					</div>
				</div>
			</router-link>
		</script>

		<script type="text/x-template" id="proof">
			<div class="screen proof">

				<div :class="{'proof-image' :true, image: true, fullscreen : cssClass.image.fullscreen}" @click='toggleImage' :style='"background-image:url(" +proof.image+ ")"'></div>

				<div class="columns">
					<div class="column">
						<div class="proof-title">{{ proof.title }}</div>
						<div class="proof-created">{{ readableTimestamp(proof.created) }}</div>
					</div>
					<!-- <div class="column">
						<div class='proof-confirmations'>{{ proof.confirmations }} confirmations</div>
					</div> -->
				</div>

				<table>
					<tr>
						<td>Owner</td>
						<td class='proof-owner'><a target="_blank" :href="etherscanLink(proof.owner, 'address')">{{ proof.owner }}</a></td>
					</tr>
					<tr>
						<td>Contract</td>
						<td class='proof-contract'><a target="_blank" :href="etherscanLink(proof.contract, 'address')">{{ proof.contract }}</a></td>
					</tr>
					<tr>
						<td>Block</td>
						<td class='proof-block'><a target="_blank" :href="etherscanLink(proof.block, 'block')">{{ proof.block }}</a></td>
					</tr>
					<tr class='sep'>
						<td colspan=2><hr></td>
					</tr>
					<tr>
						<td>File Sha256</td>
						<td class='proof-fileSha256'>{{ proof.fileSha256 }}</td>
					</tr>
				</table>
			</div>
		</script>

		<script type="text/x-template" id="proofs-list">
			<div class="screen">
				<div class="proofs-list">
					<proofs-list-entry :proof='proof' v-for='proof in proofs'></proofs-list-entry>
				</div>
			</div>
		</script>

		<script type="text/x-template" id="chat">
			<div class="screen">
				<div id='conv' class="nomargin conversation-container">
					<speech :body='message.body' :sender='message.sender' v-for='message in messages'></speech>
					<div v-show='showti' class="app speech typing-indicator">
						<span></span>
						<span></span>
						<span></span>
					</div>
				</div>

				<div class="response">

					<div class="answer-group">
						<button v-for="(answer, index) in answers" class='answer' @click='handleAnswer(answer)'>{{answer}}</button>

						<form  enctype='multipart/form-data' action="#" v-show='showFileUpload' @submit='preventSubmit'>
							<input id="selectedFile" class='answer' type="file" accept="image/*" @change="onFileChange" style="display: none;">
							<button class="answer" onclick="document.getElementById('selectedFile').click();">Choose File</button>
						</form>

						<input v-model='userInput' type="text" v-show='showFreetext'>
						<button @click='handleFreetextInput()' class='send' v-show='showFreetext'>Send</button>

					</div>
				</div>
			</div>
		</script>

		<script type="text/x-template" id="home">
			<div class="home screen">
				<h1 class='center'>Success</h1>
				<p class="text center">
					This is the æxistence. This æpp enables you to proof the existance of digital files on the æternity blockchain and share it with other poeple.
				</p>
				<div class="pink next button">
					<router-link to="/chat">
						Create first proof
					</router-link>
				</div>
			</div>
		</script>

	</body>
	<!-- <script src="main.js"></script> -->
	<script src="js/bundle.js"></script>
</html>
